<VirtualHost *:443>
    ServerName secure.wwwallet.local

    SSLEngine On
    SSLProxyEngine On

    # Dynamic Proxy settings
    # SetEnvIf Origin "^http(s)?://(.*)$" ORIGIN=$0
    # Header always set Access-Control-Allow-Origin "%{ORIGIN}e" env=ORIGIN
    # Header always set Access-Control-Allow-Methods "GET, POST, OPTIONS, PUT, DELETE"
    # Header always set Access-Control-Allow-Headers "Authorization, Content-Type"
    # Header always set Access-Control-Allow-Credentials "true"

    # Handle preflight requests
    # RewriteEngine On
    # RewriteCond %{REQUEST_METHOD} OPTIONS
    # RewriteRule ^(.*)$ $1 [R=200,L]

    # # Proxy all requests with /api to dynamic target
    # ProxyPassMatch "^/api/(.*)$" "http://${req:Host}/$1"
    # ProxyPassReverse "/api/" "http://${req:Host}/"


    SSLCertificateFile /etc/apache2/certs/server.cert
    SSLCertificateKeyFile /etc/apache2/certs/server.key
    
    # Enable mod_rewrite for this virtual host
    RewriteEngine On

    # Redirect all traffic to a specific URL
    RewriteRule ^/(.*)$ http://localhost:3000/$1 [R=301,L]

    ProxyPreserveHost On
</VirtualHost>