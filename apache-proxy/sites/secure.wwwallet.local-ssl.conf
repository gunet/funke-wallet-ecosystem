<VirtualHost *:443>
    ServerName secure.wwwallet.local

    SSLEngine On
    SSLProxyEngine On

    SSLCertificateFile /etc/apache2/certs/server.cert
    SSLCertificateKeyFile /etc/apache2/certs/server.key
    
    # Enable mod_rewrite for this virtual host
    # ProxyRequests Off
    ProxyPreserveHost On

    RewriteEngine On
    ProxyRequests Off
    
    ProxyPass / http://funke-wallet-backend-server:8002/
    ProxyPassReverse / http://funke-wallet-backend-server:8002/
    <IfModule mod_headers.c>
        # Allow dpop-nonce header
        Header always set Access-Control-Allow-Headers "dpop-nonce"
    </IfModule>
</VirtualHost>